<div class="container mx-auto py-5 md:py-10">
  {% comment %} GET COLLECTION {% endcomment %}
  {% assign collection__name = collections[section.settings.collection__carrousel].products %}

  {% capture collection__name %}
  {% for item in collection__name %}
    {{ item.metafields.custom.collection }},
  {% endfor %}
  {% endcapture %}

  <div class="flex justify-center items-center mt-0 mb-7 md:mb-10 [&>*:last-child]:hidden">
    {% assign collection__no-repeat = collection__name | split: ',' | uniq %}
    {% for item in collection__no-repeat %}
      <button
        class="text-lg border-b-2 mx-7 border-gray-300 bg-white text-black rounded-none capitalize hover:bg-white py-3 md:py-4 tracking-[1px]"
        onclick="openCity({{ item }})"
      >
        {{ item }}
      </button>
    {% endfor %}
  </div>

  <div class="w-full flex justify-center items-center">
    <div class="container mx-auto">
      <div class="swiper categories-paoti">
        <div class="swiper-wrapper">
          {% for item in collections[section.settings.collection__carrousel].products %}
            <div class="swiper-slide">
              <div class="w-full h-fit mb-7">
                <img class="mb-2" src="{{ item.images[2] | img_url: 'master' }}">

                <div class="flex justify-between items-center">
                  <h2 class="mb-1 font-medium text-[26px] text-black">{{ item.title }}</h2>

                  <div class="product-block__price mb-3 flex justify-center">
                    <a class="w-fit border border-black text-[13px] flex justify-center items-center rounded-full px-3 py-[3px] mt-[10px]"
                      >SHOP NOW</a
                    >
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </div>

  <div id="Mini-Handbags" class="w3-container city" style="display:none">
    <h2>Mini Handbags</h2>
    <p>Paris is the capital of France.</p>
  </div>

  <div id="Swimwear" class="w3-container city" style="display:none">
    <h2>Swimwear</h2>
    <p>Tokyo is the capital of Japan.</p>
  </div>
</div>

<script>
  function openCity(cityName) {
    var i;
    var x = document.getElementsByClassName('city');
    for (i = 0; i < x.length; i++) {
      x[i].style.display = 'none';
    }
    document.getElementById(cityName).style.display = 'block';
  }

  var swiper = new Swiper('.categories-paoti', {
    slidesPerView: 1,
    freeMode: true,
    spaceBetween: 30,
    pagination: {
      el: '.swiper-pagination',
    },
    breakpoints: {
      720: {
        slidesPerView: 3,
        spaceBetween: 50,
      },
    },
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
  });
</script>

{% comment %}
  grabCursor: true,
  centeredSlides: true,
  slidesPerView: 'auto',
  coverflowEffect: {
    rotate: 50,
    stretch: 0,
    depth: 70,
    modifier: 1,
  },
{% endcomment %}

{% schema %}
{
  "name": "Category Carrousel",
  "settings": [
    {
      "type": "collection",
      "id": "collection__carrousel",
      "label": "Select a colletion"
    }
  ]
}
{% endschema %}

{% style %}
  .swiper {
    width: 100%;
    height: 100%;
  }

  .swiper-slide {
    text-align: center;
    font-size: 18px;
    background: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 80%;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .swiper-pagination-bullet-active {
    background: #000;
  }
{% endstyle %}
