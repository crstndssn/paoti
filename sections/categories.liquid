<div class="container mx-auto py-10">
  {% comment %} GET COLLECTION {% endcomment %}
  {% assign collection__name = collections[section.settings.collection__carrousel].products %}

  {% capture collection__name %}
  {% for item in collection__name %}
    {{ item.metafields.custom.collection }},
  {% endfor %}
  {% endcapture %}

  <div class="flex justify-center items-center mt-0 mb-10 [&>*:last-child]:hidden">
    {% assign collection__no-repeat = collection__name | split: ',' | uniq %}
    {% for item in collection__no-repeat %}
      <button
        class="text-lg border-b-2 mx-7 border-gray-300 bg-white text-black rounded-none capitalize hover:bg-white"
        onclick="openCity({{ item }})"
      >
        {{ item }}
      </button>
    {% endfor %}
  </div>

  <div class="grid grid-cols-5 gap-8">
    {% for item in collections[section.settings.collection__carrousel].products %}
      {% render 'product-block',
        product: item,
        manual_image_load: section.settings.enable_carousel,
        custom_aspect_ratio: chosen_aspect_ratio,
        no_swiping: section.settings.enable_carousel,
        no_quick_buy_markup: section.settings.enable_carousel
      %}
    {% endfor %}
  </div>

  <div class="hidden" id="Handbags">
    <div class="swiper mySwiper h-24">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->
        <div class="swiper-slide w-full h-full bg-red-100 text-red-600">
          {% render 'product-block',
            product: product,
            manual_image_load: section.settings.enable_carousel,
            custom_aspect_ratio: chosen_aspect_ratio,
            no_swiping: section.settings.enable_carousel,
            no_quick_buy_markup: section.settings.enable_carousel
          %}
        </div>
        <div class="swiper-slide">Slide 2</div>
        <div class="swiper-slide">Slide 3</div>
        <div class="swiper-slide">Slide 4</div>
        <div class="swiper-slide">Slide 5</div>
        <div class="swiper-slide">Slide 7</div>
        {% comment %} ... {% endcomment %}
      </div>
      <!-- If we need navigation buttons -->
      {% comment %}
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-pagination"></div>
      {% endcomment %}
    </div>
  </div>

  <div id="Mini-Handbags" class="w3-container city" style="display:none">
    <h2>Mini Handbags</h2>
    <p>Paris is the capital of France.</p>
  </div>

  <div id="Swimwear" class="w3-container city" style="display:none">
    <h2>Swimwear</h2>
    <p>Tokyo is the capital of Japan.</p>
  </div>
</div>

<script>
  function openCity(cityName) {
    var i;
    var x = document.getElementsByClassName('city');
    for (i = 0; i < x.length; i++) {
      x[i].style.display = 'none';
    }
    document.getElementById(cityName).style.display = 'block';
  }

  var swiper = new Swiper('.mySwiper', {
    slidesPerView: 5,
    spaceBetween: 30,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  });
</script>

{% schema %}
{
  "name": "Category Carrousel",
  "settings": [
    {
      "type": "collection",
      "id": "collection__carrousel",
      "label": "Select a colletion"
    }
  ]
}
{% endschema %}

{% style %}
  .swiper {
    width: 100%;
    height: 100%;
  }
{% endstyle %}
